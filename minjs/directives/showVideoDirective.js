app.directive("showVideoDirective",["$sce","snowballService",function(a,b){return{restrict:"ACE",templateUrl:"../partials/templates/video.html",link:function(a,c,d){function e(a,b){this.video=a,this.popup=b}e.prototype.play=function(){this.video.play()},e.prototype.pause=function(){this.video.pause()},e.prototype.stop=function(){this.video.pause(),this.video.src=""},e.prototype.hide=function(){$("body").css("overflow","auto").off("touchmove"),this.popup.removeClass("show").addClass("hide")},e.prototype.show=function(){$("body").css("overflow","hidden").on("touchmove",function(a){a.preventDefault()}),this.popup.removeClass("hide").addClass("show")},e.prototype.setUrl=function(a){this.video.src=a},e.prototype.addEndedEvent=function(a){this.video.onended=a},e.prototype.requestFullScreen=function(){this.video.requestFullscreen?this.video.requestFullscreen():this.video.msRequestFullscreen?this.video.msRequestFullscreen():this.video.mozRequestFullScreen?this.video.mozRequestFullScreen():elem.webkitRequestFullscreen&&this.video.webkitRequestFullscreen()};var f,g=$(c).find("video")[0],h=$(c).find("div");a.$on("openVideo",function(a,c,d){f=new e(g,h);var i=d.snowball.items,j=i.indexOf(c);f.addEndedEvent(function(){if(-1!=j){j++,j==i.length&&(j=0);var a=i[j];f.setUrl(b.getVideoUrl(a.collaboration.url)),f.play()}}),f.setUrl(b.getVideoUrl(c.collaboration.url)),f.play(),f.show()}),$(c).on("click",function(a){f&&(f.stop(),f.hide())})}}}]);